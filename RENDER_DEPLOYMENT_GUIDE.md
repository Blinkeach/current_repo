# Render Deployment Guide for Blinkeach E-commerce Platform

## Prerequisites

1. **GitHub Repository**: Push your code to a GitHub repository
2. **Render Account**: Sign up at [render.com](https://render.com)
3. **API Keys**: Collect all required API keys and secrets

## Required Environment Variables

### Database
- `DATABASE_URL` - PostgreSQL connection string (auto-generated by Render)

### Authentication & Security
- `JWT_SECRET` - JWT token signing secret (auto-generated)
- `SESSION_SECRET` - Express session secret (auto-generated)

### Payment Integration
- `RAZORPAY_KEY_ID` - Your Razorpay API key
- `RAZORPAY_KEY_SECRET` - Your Razorpay API secret

### Email Services
- `SENDGRID_API_KEY` - SendGrid API key for transactional emails
- `GMAIL_USER` - Gmail username for backup email service
- `GMAIL_APP_PASSWORD` - Gmail app-specific password

### Social Authentication
- `GOOGLE_CLIENT_ID` - Google OAuth client ID
- `GOOGLE_CLIENT_SECRET` - Google OAuth client secret
- `FACEBOOK_APP_ID` - Facebook app ID
- `FACEBOOK_APP_SECRET` - Facebook app secret

### Delivery Services
- `DELHIVERY_API_KEY` - Delhivery courier API key

## Deployment Steps

### Method 1: Using render.yaml (Recommended)

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push origin main
   ```

2. **Deploy on Render**
   - Go to [render.com/dashboard](https://render.com/dashboard)
   - Click "New +"
   - Select "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file and create:
     - PostgreSQL database
     - Web service with all environment variables

3. **Set Environment Variables**
   - Go to your web service settings
   - Add the required API keys in the Environment section:
     ```
     SENDGRID_API_KEY=your_sendgrid_key
     RAZORPAY_KEY_ID=your_razorpay_key
     RAZORPAY_KEY_SECRET=your_razorpay_secret
     DELHIVERY_API_KEY=your_delhivery_key
     GMAIL_USER=your_gmail@gmail.com
     GMAIL_APP_PASSWORD=your_app_password
     GOOGLE_CLIENT_ID=your_google_client_id
     GOOGLE_CLIENT_SECRET=your_google_client_secret
     FACEBOOK_APP_ID=your_facebook_app_id
     FACEBOOK_APP_SECRET=your_facebook_app_secret
     ```

### Method 2: Manual Setup

1. **Create PostgreSQL Database**
   - Click "New +"
   - Select "PostgreSQL"
   - Name: `blinkeach-db`
   - Plan: Starter (free)

2. **Create Web Service**
   - Click "New +"
   - Select "Web Service"
   - Connect your GitHub repository
   - Configure:
     - **Name**: `blinkeach-ecommerce`
     - **Environment**: Node
     - **Build Command**: `npm ci && npm run build`
     - **Start Command**: `npm start`
     - **Plan**: Starter (free)

3. **Connect Database**
   - In web service settings, go to Environment
   - Add `DATABASE_URL` and link it to your PostgreSQL database

## Post-Deployment Setup

### 1. Database Migration
Your database will be empty initially. You'll need to:
- The Drizzle ORM will automatically create tables on first run
- Use the admin panel to add initial products and categories

### 2. Test Your Deployment
- Visit your Render URL (provided after deployment)
- Test user registration and login
- Test product browsing and cart functionality
- Verify payment integration (use test mode)

### 3. Domain Configuration (Optional)
- In your web service settings, go to Settings
- Add your custom domain under "Custom Domains"
- Update your OAuth redirect URLs to use the new domain

## Important Configuration Notes

### SSL/TLS
- Render provides automatic SSL certificates
- All traffic is encrypted by default

### File Uploads
- Render has ephemeral storage
- Consider integrating with cloud storage (AWS S3, Cloudinary) for production

### Logs
- Access logs via Render dashboard
- Monitor performance and errors

### Scaling
- Starter plan is sufficient for development/testing
- Upgrade to Professional for production traffic

## Production Checklist

- [ ] All environment variables configured
- [ ] Database connected and tables created
- [ ] Payment gateway in live mode (when ready)
- [ ] Email service configured and tested
- [ ] Social authentication working
- [ ] Delivery API integrated
- [ ] Custom domain configured (optional)
- [ ] SSL certificate active
- [ ] Error monitoring setup

## Troubleshooting

### Common Issues

1. **Build Failures**
   - Check that all dependencies are in `package.json`
   - Verify build command is correct

2. **Database Connection Issues**
   - Ensure DATABASE_URL is properly linked
   - Check if database is running

3. **API Key Errors**
   - Verify all required environment variables are set
   - Check that keys are valid and not expired

4. **CORS Issues**
   - The app is configured for same-origin requests
   - No additional CORS configuration needed

### Support
- Check Render documentation: [render.com/docs](https://render.com/docs)
- Monitor logs in Render dashboard
- Use browser developer tools for frontend issues

Your Blinkeach e-commerce platform is now ready for production deployment on Render!